<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="answerMapper">
    
    <resultMap id="answerResultSet" type="AnswerInfo">
        <result column="USERQNA_NUM" property="userQnaNum"/>
        <result column="USER_NO" property="userNo"/>
        <result column="ANSWER_TITLE" property="answerTitle"/>
        <result column="ANSWER_CNA" property="answerContent"/>
        <result column="ANSWER_IMG" property="answerImg"/>
        <result column="PRODUCT_NUM" property="productNum"/>
        <result column="ADMIN_NAME" property="adminName"/>
    </resultMap>
    
    <select id="selectAnswerList" resultMap="answerResultSet">
        SELECT * FROM ANSWER ORDER BY USERQNA_NUM DESC
    </select>
    
    <select id="selectAnswer" parameterType="_int" resultMap="answerResultSet">
        SELECT * FROM ANSWER WHERE USERQNA_NUM = #{userQnaNum}
    </select>
    
    <insert id="insertAnswer" parameterType="AnswerInfo">
        INSERT INTO ANSWER (USERQNA_NUM, USER_NO, ANSWER_TITLE, ANSWER_CNA, ANSWER_IMG, PRODUCT_NUM, ADMIN_NAME)
        VALUES (#{userQnaNum}, #{userNo}, #{answerTitle}, #{answerContent}, #{answerImg}, #{productNum}, #{adminName})
    </insert>
    
    <update id="updateAnswer" parameterType="AnswerInfo">
        UPDATE ANSWER SET 
            ANSWER_TITLE = #{answerTitle},
            ANSWER_CNA = #{answerContent},
            ANSWER_IMG = #{answerImg}
        WHERE USERQNA_NUM = #{userQnaNum}
    </update>
    
    <delete id="deleteAnswer" parameterType="_int">
        DELETE FROM ANSWER WHERE USERQNA_NUM = #{userQnaNum}
    </delete>
    
    <select id="selectAnswersByUser" parameterType="_int" resultMap="answerResultSet">
        SELECT * FROM ANSWER WHERE USER_NO = #{userNo} ORDER BY USERQNA_NUM DESC
    </select>
    
    <select id="selectAnswersByProduct" parameterType="_int" resultMap="answerResultSet">
        SELECT * FROM ANSWER WHERE PRODUCT_NUM = #{productNum} ORDER BY USERQNA_NUM DESC
    </select>
    
</mapper>
